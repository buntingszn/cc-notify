# ntfy server configuration for cc-notify
# See https://docs.ntfy.sh/config/ for all options

base-url: "{{BASE_URL}}"
listen-http: "127.0.0.1:{{PORT}}"

cache-file: "/var/lib/ntfy/cache.db"
auth-file: "/var/lib/ntfy/user.db"
auth-default-access: "deny-all"
cache-duration: "24h"

# iOS push delivery: forward poll_request to ntfy.sh so the iOS app
# receives instant push notifications. Only the message ID is sent to
# ntfy.sh — actual message content stays on this server.
upstream-base-url: "https://ntfy.sh"

# Declarative token for the hooks user (created during setup).
# This avoids the fragile `ntfy token add` + grep extraction.
# Format: "username:token:label" — token must start with tk_ (32 chars total).
auth-tokens:
  - "claude-hooks:{{HOOKS_TOKEN}}:claude-hooks"

# Rate limiting
visitor-request-limit-burst: 60
visitor-request-limit-replenish: "1s"

# Attachments disabled
attachment-total-size-limit: "0"

log-level: "info"
log-format: "text"
